# Heady Lab Results App Flow Document

## Onboarding and Sign-In/Sign-Up
When a new user arrives at Heady Lab Results, they are welcomed with a clean and modern landing page that introduces the platform's purpose and benefits. The initial interface offers options for both new registrations and existing user sign-in. For new users, the registration process is simple; the user is prompted to provide an email address and create a password, after which they are guided to select a preferred subscription tier. Each subscription tier, be it Basic or Enterprise, comes with a 7-day free trial, and clear information on trial duration is provided during sign-up. Social login may also be offered, though the primary method is via email and password, ensuring secure access and ease of management through Supabase integration. Once the account is created, the new user is taken to a verification page or inbox instruction if further email confirmation is needed. Returning users enter their login details and are granted access to the main dashboard. In case a user forgets their password, a 'Forgot Password' link is prominently displayed, guiding them through the steps of receiving a recovery link via email to reset the password. Signing out is a simple click on the sign-out option in the header, ensuring that account security remains tight at every step.

## Main Dashboard or Home Page
Once the user is authenticated, they arrive at the main dashboard which is designed for clarity and ease of navigation. The default view presents an overview of the user's account status, including current subscription details, usage credits, and a summary of recent activities such as recent uploads and analyses. The home dashboard is structured with a minimalistic design featuring a top header that houses options like notifications and account settings, and a sidebar that enables quick navigation to major app sections. For users with a retailer role, the displayed content focuses on their lab result uploads, low-credit alerts, and options to initiate new PDF uploads. In contrast, administrators see additional components like overall app analytics, user management tools, and system settings. This role-based differentiation ensures that every user finds relevant information immediately upon logging in and can quickly move to the next task or page without confusion.

## Detailed Feature Flows and Page Transitions
From the main dashboard, users have access to a series of interconnected pages that facilitate the core functionalities of the application. When a retailer wishes to process new lab results, they click on the navigation link labeled 'Upload' which directs them to the PDF Upload page. Here, users are presented with an interface that is straightforward and modern, enabling them to select and upload a PDF document containing lab results. The system enforces strict file criteria, ensuring that only PDF files under 1 MB in size and with no more than five pages can be successfully uploaded. Once the file is selected, users confirm the upload which then immediately triggers backend validations. The PDF undergoes file type confirmation and page count check; upon passing these verifications, the file is sent into an asynchronous processing queue. Immediately after confirmation, users receive a status update on the upload page, notifying them that the file is being processed. The PDF is then forwarded to GPT-4o for generating product descriptions based on lab data. Users can check progress indicators and receive real-time notifications of processing status. When processing is complete, the app automatically transitions the user to a Results Analysis page where the AI-generated product descriptions and insights are displayed in a clear, formatted view. For users seeking further details or actions, the Results page also offers a navigation option to the Reports and Exports page. Here, the user is given the option to download CSV reports including timestamps, detailed lab results, and activity logs. Additionally, administrators enjoy an extra layer of navigation options including access to a System Administration panel where they can manage user accounts, review aggregated analytics, and adjust global settings. Every page link and button is designed to maintain a smooth flow between tasks while ensuring that feedback is prompt and actionable.

## Settings and Account Management
The Account Settings section is accessible from the main dashboard header. Here, users can update personal details like their email, password, and contact information, as well as adjust notification preferences to receive low-credit alerts by email. This settings area also integrates subscription management features through Stripe. Users can update their payment methods, review subscription plans, and manage their current tier. For those subscribed to the 7-day free trial, clear notifications are provided two days before the trial expires, prompting them to select a formal plan. Administrators have an extended settings panel that includes user management tools, an overview of payment history, and controls for handling failed transactions. In cases of failed payment, the system is designed to automatically retry the charge up to three times before downgrading the user to a free limited-access plan, with email notifications sent after each attempt. After users make and save any changes in settings, they are gently redirected back to the main dashboard to resume their day-to-day operations.

## Error States and Alternate Paths
The application includes robust error handling to ensure users are never left without guidance. If a user attempts to upload a file that does not meet the requirements—such as a non-PDF file or a document exceeding size or page limits—a clear error message appears directly on the upload page. This message explains the reason for failure and advises on corrective steps. In situations where network issues or processing delays occur, status notifications keep the user informed of temporary interruptions. In cases of subscription or payment failures, tailored error pages and email alerts direct the user to resolve payment issues. Unauthorized access attempts to administrator sections by regular retailers trigger a safe redirect to the dashboard with a message indicating restricted access. Throughout the application, fallback pages are designed to be user-friendly and informative, ensuring that any error or abnormal path still leads the user to a solution or a safe space to try again.

## Conclusion and Overall App Journey
The journey through Heady Lab Results begins with a simple yet secure sign-up or login process that welcomes users and guides them into the platform. From the clear and role-specific main dashboard, users can navigate seamlessly to core functions such as uploading lab result PDFs, obtaining AI-powered product descriptions, and generating detailed CSV reports. The flow is intentionally designed for both regular cannabis product retailers and system administrators. Retailers focus on managing their lab data and maintaining subscription health, while administrators have additional oversight and control functions. Every step, from immediate PDF validation and asynchronous processing by GPT-4o to clear account management and error resolution, has been designed to be modern, minimalistic, and intuitive. At every transition, users receive guidance, feedback, and the necessary tools to streamline their daily operations, making it easy to harness detailed lab results for effective product provisioning. This comprehensive user journey ensures a solid and connected flow through every feature, empowering both retailers and administrators to meet their essential operational needs efficiently.